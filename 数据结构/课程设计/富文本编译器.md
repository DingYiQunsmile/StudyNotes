# 题目六：简易文本编辑器

## 【问题描述】

编程建立一个文本文件，输入一页文字，每个单词不包含空格且不跨行，单词由字符序列构成且区分大小写。

## 【基本要求】

输入数据的形式和范围：建立文本文件，文件名由用户用键盘输入；可以输入大写、小写的英文字母、任何数字及标点符号。

+ （1）分别统计出其中英文字母数和空格数及整篇文章总字数；
+ （2）统计某一字符串在文章中出现的次数，并输出该次数；
+ （3）删除某一子串，并将后面的字符前移；
+ （4）查找，替换（等长，不等长），插入（插串，文本块的插入）、块移动（行块，列块移动），删除；
+ （5）检索输出某个单词出现在文本中的行号、在该行中出现的次数以及位置;
+ （6）可正确存盘、取盘；
+ （7）正确显示总行数。

## 【任务分配】

|姓名|任务|
|:--:|:--:|
|杨旭|（2）统计某一字符串在文章中出现的次数，并输出该次数，kmp算法交给你了|
|王浩|（4）查找，替换（等长，不等长），插入（插串，文本块的插入）、块移动（行块，列块移动），删除，|
|丁逸群|（1）分别统计出其中英文字母数和空格数及整篇文章总字数，（7）以及行数，（3）删除某一子串，并将后面的字符前移|
|武智鹏|（5）检索输出某个单词出现在文本中的行号、在该行中出现的次数以及位置，（6）并将整个文本存盘、取盘|

## 【整体思路】

+ 【结构】
  + 思路一：邻接表
  + 思路二：整体一个链表，多开一个值域用于储存行号
+ 【匹配】 kmp匹配算法
+ 【存盘取盘】 fscanf,fprintf,格式化录入


![PNg](https://upload-images.jianshu.io/upload_images/9140378-ef4a894f99f4a2a6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

## 【注意事项】

不要求有多炫，先实现功能，大家加油！！！

## 【具体代码】

```c
#include "stdio.h"
#include "stdlib.h"
#include "string.h"
#include "string.h"
#include "textstruct.h"


void ReadFromFile(TextCompiler *text, char *filename)
{
	Word *word;  //新的结点
	FILE *file;
	Word *p = NULL;
	file = fopen(filename, "r");
	char data;
	int i = 0;
	int j = -1;
	if (file)
	{
		word = (Word *)malloc(sizeof(Word));
		while ((word->data[i] = fgetc(file)) != EOF)
		{
			if (word->data[i] == '\n')  //如果读取的这个
			{
				word->data[i] = '\0'; 
				j++;//行数加1再赋值
				text->column[j].FirstWord = word;  //将读取的这一行链接到表结点的后面
				word = (Word *)malloc(sizeof(Word)); //再次开辟一个新的word
				i = 0; //再次从i=0开始循环
				text->count++;  //整体行数加1
			}
			else
				i++;
		}
		printf("文件数据读取成功!!!\n");
	}
	else
		printf("文件打开失败！\n");
}

//整体输出
void EsayOutput(TextCompiler *text)
{
	for (int i = 0; i < text->count; i++)
		printf("%s\n", text->column[i].FirstWord->data);
}


void menu()
{
	printf("\t*******简易文本编辑器*******\n");
	printf("\t\t1.输入文本数据\n");
	printf("\t\t2.从文件读取数据\n");
	printf("\t\t3.整体输出文本\n");
	printf("\t\t4.统计文本中的字符个数\n");
	printf("\t\t5.删除子串\n");
	printf("\t\t6.查找、替换、插入字符串\n");
	printf("\t\t7.检索某个单词的行号和在该行出现的次数以及位置\n");
	printf("\t\t8.输出总行数\n");
	printf("\t\t9.退出\n");
}


int TheWordNumberOfText(TextCompiler *text)
{
	int count = 0; //计数器
	int j; //数组下标记录
	for (int i = 0; i < text->count; i++)
	{
		j = 0;
		while (text->column[i].FirstWord->data[j] != '\0')
		{
			j++;  //数组下标移动
			count++;  //添加数据
		}
	}
	return count;
}

int main()
{
	int input = 0;
	menu();
	char filename[] = "";
	printf("请输出功能编号：\n");
	scanf("%d", &input);
	TextCompiler text;  //定义的结构体
	text.count = 0;  //一开始的行数为0
	while (input > 0 && input < 10)
	{
		switch (input)
		{
		case 1: {

			break;
		}
		case 2: {
			printf("请输入文件路径：\n");  //D:\\Desktop\\test.txt
			scanf("%s", filename);
			ReadFromFile(&text, filename);
			break;
		}
		case 3: {
			EsayOutput(&text);
			break;
		}
		case 4: {
			printf("该文本中的字符个数：%d\n",TheWordNumberOfText(&text));
			break;
		}
		case 5: {

			break;
		}
		case 6: {

			break;
		}
		case 7: {

			break;
		}
		case 8: {
			printf("总行数为:%d\n", text.count);
			break;
		}
		case 9: {
			exit(0);
			break;
		}
		default:
			break;
		}
		//menu();
		printf("请输出功能编号：\n");
		scanf("%d", &input);
	}
	system("pause");
	return 0;
}
```